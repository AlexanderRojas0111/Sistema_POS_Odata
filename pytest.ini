[tool:pytest]
# ========================================================================
# Sistema POS O'data - Configuraci贸n de Pytest
# ========================================================================
# Versi贸n: 2.0.0
# Compatible con Python 3.13+
# ========================================================================

# Directorios de tests
testpaths = tests

# Patrones de archivos de test
python_files = test_*.py *_test.py test*.py
python_classes = Test*
python_functions = test_*

# Opciones por defecto
addopts = 
    -v
    --tb=short
    --strict-markers
    --cov=app
    --cov-report=html:reports/coverage
    --cov-report=xml:reports/coverage.xml
    --cov-report=term-missing
    --cov-fail-under=80
    --cov-branch
    --cov-config=.coveragerc

# Marcadores personalizados
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    frontend: marks tests as frontend tests
    backend: marks tests as backend tests
    database: marks tests as database tests
    performance: marks tests as performance tests
    security: marks tests as security tests
    ai: marks tests as AI/ML tests

# Configuraci贸n de filtros
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:matplotlib.*
    ignore::UserWarning:pandas.*

# Configuraci贸n de cobertura
[tool:coverage.run]
source = app
omit = 
    */tests/*
    */migrations/*
    */venv/*
    */__pycache__/*
    */scripts/*
    */frontend/*
    */docs/*
    */monitoring/*
    */nginx/*
    */migrations/*
    */instance/*
    */logs/*
    */reports/*
    */data/*
    */Documentacion/*
    */deploy_*.py
    */run_*.py
    */start_*.py
    */prepare_*.py
    */add_*.py
    */CHANGELOG.md
    */CONTRIBUTING.md
    */README.md
    */LICENSE
    */SECURITY.md
    */VERSION.md
    */GUIA_*.md
    */SISTEMA_*.md
    */MODELOS_*.md
    */VALIDATION_*.md
    */DEPLOYMENT_*.md
    */Dockerfile*
    */docker-compose*.yml
    */Jenkinsfile
    */pytest.ini
    */requirements*.txt
    */Makefile
    */.env*
    */.git*
    */.flake8
    */.blackboxrules
    */.dockerignore
    */alembic.ini
    */migrations/env.py
    */migrations/script.py.mako
    */migrations/versions/*
    */migrations/README
    */scripts/init-production-db.sql
    */scripts/*.sh
    */scripts/*.bat
    */scripts/entrypoint.sh
    */scripts/backup.sh
    */scripts/clean_*.py
    */scripts/export_*.py
    */scripts/generate_*.sh
    */scripts/install_*.py
    */scripts/load_*.py
    */scripts/migrate_*.py
    */scripts/pre-commit.sh
    */scripts/prepare_*.py
    */scripts/run_*.py
    */scripts/security_*.py
    */scripts/setup_*.py
    */scripts/update_*.py
    */scripts/validate_*.py
    */scripts/check_*.py
    */scripts/health_*.py
    */scripts/github_*.py
    */scripts/entrypoint.sh
    */scripts/backup.sh
    */scripts/clean_*.py
    */scripts/export_*.py
    */scripts/generate_*.sh
    */scripts/install_*.py
    */scripts/load_*.py
    */scripts/migrate_*.py
    */scripts/pre-commit.sh
    */scripts/prepare_*.py
    */scripts/run_*.py
    */scripts/security_*.py
    */scripts/setup_*.py
    */scripts/update_*.py
    */scripts/validate_*.py
    */scripts/check_*.py
    */scripts/health_*.py
    */scripts/github_*.py

[tool:coverage.report]
exclude_lines =
    pragma: no cover
    def __repr__
    if self.debug:
    if settings.DEBUG
    raise AssertionError
    raise NotImplementedError
    if 0:
    if __name__ == .__main__.:
    class .*\bProtocol\):
    @(abc\.)?abstractmethod